function addToSVG(e,t,a){el=$(document.createElementNS("http://www.w3.org/2000/svg",e)),el.attr(t).appendTo(a)}function addTextToSVG(e,t,a,i){el=$(document.createElementNS("http://www.w3.org/2000/svg",e)),el.text(i),el.attr(t).appendTo(a)}function resolveCoOrdinates(e){"use strict";var t=e-1,a=10-Math.floor(t/10),i=t%10+1;a%2!==0&&(i=11-i);var r=20*i-10,n=20*a-10;return{X:r,Y:n}}function createLadder(){const e=81;for(var t=0;-1!==$.inArray(t,blockedPlaces);)t=Math.floor(Math.random()*e);for(var a=0;-1!==$.inArray(a,blockedPlaces);){var i=Math.floor((t-1)/10),r=i+1,n=10*r+1;a=n+Math.floor(Math.random()*(100-n))}return blockedPlaces.push(t),blockedPlaces.push(a),{S:t,F:a}}function createSnake(){const e=11;for(var t=0;-1!==$.inArray(t,blockedPlaces);)t=e+Math.floor(89*Math.random());for(var a=0,i=0;-1!==$.inArray(i,blockedPlaces)&&!(a>200);){a++;var r=Math.floor((t-1)/10),n=r,l=10*n;i=Math.floor(Math.random()*l)}return blockedPlaces.push(t),blockedPlaces.push(i),{S:t,F:i}}function newBoardLayout(){"use strict";ladders=[],snakes=[],blockedPlaces=[0,1,100];var e=8,t=8;$("#id-snl-ladders-svg").empty(),$("#id-snl-snakes-svg").empty();for(var a=0;e>a;++a){var i=createLadder();ladders.push({start:i.S,finish:i.F})}for(a=0;t>a;++a){var r=createSnake();snakes.push({start:r.S,finish:r.F})}}function drawLadders(){"use strict";var e="#id-snl-ladders-svg";for(var t in ladders){var a=resolveCoOrdinates(ladders[t].start),i=resolveCoOrdinates(ladders[t].finish);a.X===i.X&&(i.X=i.X-2,a.X=a.X+2);var r=Math.atan((a.Y-i.Y)/(a.X-i.X));const n=4;var l=(a.X+n*Math.sin(r)).toFixed(1),o=(a.Y-n*Math.cos(r)).toFixed(1),s=(a.X-n*Math.sin(r)).toFixed(1),d=(a.Y+n*Math.cos(r)).toFixed(1),c=(i.X+n*Math.sin(r)).toFixed(1),u=(i.Y-n*Math.cos(r)).toFixed(1),f=(i.X-n*Math.sin(r)).toFixed(1),y=(i.Y+n*Math.cos(r)).toFixed(1);addToSVG("line",{x1:i.X,y1:i.Y,x2:a.X,y2:a.Y,stroke:"white","stroke-width":8,"stroke-opacity":1,"stroke-dasharray":"0.25, 3.75"},e),addToSVG("line",{x1:l,y1:o,x2:c,y2:u,stroke:"#dddddd","stroke-width":.5,"stroke-opacity":1},e),addToSVG("line",{x1:s,y1:d,x2:f,y2:y,stroke:"#dddddd","stroke-width":.5,"stroke-opacity":1},e);var p=0>r?-1:1,h=0>r?r*(180/Math.PI)+90:r*(180/Math.PI)-90,m=(a.X+2*p*Math.cos(r)).toFixed(1),P=(a.Y+2*p*Math.sin(r)).toFixed(1);addToSVG("circle",{cx:m,cy:P,r:2,fill:"white"},e),addTextToSVG("text",{x:m,y:P,fill:"green","font-family":"Helvetica Neue, sans-serif","font-size":2,"text-anchor":"middle","alignment-baseline":"middle",transform:"rotate("+h+" "+m+","+P+")"},e,ladders[t].finish)}}function drawSnakes(){"use strict";var e="#id-snl-snakes-svg";for(var t in snakes){var a=resolveCoOrdinates(snakes[t].start),i=resolveCoOrdinates(snakes[t].finish);a.X===i.X&&(i.X=i.X-2);var r=Math.atan((a.Y-i.Y)/(a.X-i.X));const n=6;var l=(a.X+n*Math.sin(r)).toFixed(1),o=(a.Y-n*Math.cos(r)).toFixed(1),s=(a.X-n*Math.sin(r)).toFixed(1),d=(a.Y+n*Math.cos(r)).toFixed(1),c="M"+i.X+","+i.Y+" L"+l+","+o+" "+s+","+d+" Z L"+a.X+","+a.Y;addToSVG("path",{d:c,fill:"transparent",stroke:"gold","stroke-width":.25},e);var u=0>r?1:0;c="M"+l+","+o+" A"+n+","+n+" 0 0,"+u+" "+s+","+d+" Z",addToSVG("path",{d:c,fill:"#e74c3c",stroke:"gold","stroke-width":.25},e);var f=0>r?1:-1,y=0>r?r*(180/Math.PI)+90:r*(180/Math.PI)-90,p=(a.X+2*f*Math.cos(r)).toFixed(1),h=(a.Y+2*f*Math.sin(r)).toFixed(1);addToSVG("circle",{cx:p,cy:h,r:2,fill:"white"},e),addTextToSVG("text",{x:p,y:h,fill:"#e74c3c","font-family":"Helvetica Neue, sans-serif","font-size":2,"text-anchor":"middle","alignment-baseline":"middle",transform:"rotate("+y+" "+p+","+h+")"},e,snakes[t].finish),addToSVG("circle",{cx:i.X,cy:i.Y,r:1.5,stroke:"gold","stroke-width":.25,fill:"#e74c3c"},e)}}function playSound(e){if(!soundMute){var t=document.createElement("audio");t.setAttribute("src","./static/sound/"+e),t.setAttribute("autoplay","autoplay"),t.addEventListener("load",function(){t.play()},!0)}}function highlightNextCell(){for(var e=1;100>=e;++e)$("#id-snl-cell-"+e).css("background-image","none");setTimeout(function(){$("#id-snl-cell-"+PlayerPosition[currentPlayer]).css("background","url(static/img/assets/activecell.svg) no-repeat center center"),$("#id-snl-cell-"+PlayerPosition[currentPlayer]).css("background-size","100%")},2e3)}function animateMove(e){var t="id-snl-cell-"+e,a="id-snl-cell-"+PlayerPosition[currentPlayer];0===e?$("#"+a+"> .player"+currentPlayer).delay(1500).fadeIn("slow"):($("#"+t+"> .player"+currentPlayer).delay(500).fadeOut("slow"),$("#"+a+"> .player"+currentPlayer).delay(1500).fadeIn("slow")),$("#"+a+"> .player"+currentPlayer).attr("data-original-title",Player[currentPlayer]+": "+PlayerPosition[currentPlayer]),$("#"+a+"> .player"+currentPlayer+" + .tooltip > .tooltip-inner").css("color",PlayerCol[currentPlayer]);var i="%c"+Player[currentPlayer]+" moves from "+e+" to "+PlayerPosition[currentPlayer]}function makeMoves(){for(var e in diceRollQueue){var t=PlayerPosition[currentPlayer];PlayerPosition[currentPlayer]=PlayerPosition[currentPlayer]+diceRollQueue[e],PlayerPosition[currentPlayer]>100?PlayerPosition[currentPlayer]=200-PlayerPosition[currentPlayer]:100===PlayerPosition[currentPlayer]&&(gameEnded=!0,extraLadderRoll=0),animateMove(t);for(var a in ladders)if(ladders[a].start===PlayerPosition[currentPlayer]){PlayerPosition[currentPlayer]=ladders[a].finish,setTimeout(playSound("ladder.mp3"),1500),animateMove(ladders[a].start),++extraLadderRoll;break}for(var i in snakes)if(snakes[i].start===PlayerPosition[currentPlayer]){PlayerPosition[currentPlayer]=snakes[i].finish,setTimeout(playSound("snake.mp3"),1500),animateMove(snakes[i].start);break}if($("#id-snl-player-"+currentPlayer+" a span i").text(" "+PlayerPosition[currentPlayer]),gameEnded)break}}function postDiceRoll(){if(diceRollQueue.push(currentDiceValue),6===currentDiceValue){ongoingMove=!0;var e=diceRollQueue.length;if(e>=3){var t=diceRollQueue[e-1]+diceRollQueue[e-2]+diceRollQueue[e-3];18===t&&(diceRollQueue=[])}}else makeMoves(),diceRollQueue=[],ongoingMove=!1,0>=extraLadderRoll&&!gameEnded?currentPlayer=currentPlayer%totalPlayers+1:--extraLadderRoll}function resetGameplay(e){gameEnded=!1,currentPlayer=1,currentDiceValue=0,ongoingMove=!1,diceRollQueue=[],extraLadderRoll=0,setTimeout(function(){for(var t in PlayerPosition){var a="id-snl-cell-"+PlayerPosition[t];$("#"+a+"> .player"+t).delay(500*e).fadeOut("slow"),$("#"+a).css("background-image","none"),PlayerPosition[t]=0}for(var i=1;totalPlayers>=i;++i)$("#id-snl-player-"+i).removeClass("active"),$("#id-snl-player-"+i+" a span i").text("");$("#id-snl-player-1").addClass("active")},2500*e)}function showWinModal(){playSound("win.mp3"),$("#id-snl-win-modalLabel > i").text(" Winner: "+Player[currentPlayer]);for(var e=1;totalPlayers>=e;++e)$("#id-snl-result-p"+e+" i").text(" "+Player[e]+": "+PlayerPosition[e]);$("#id-snl-win-modal").modal("show",{keyboard:!1})}const debug=!1;var Player={1:"Player 1",2:"Player 2",3:"Player 3",4:"Player 4"},PlayerCol={1:"#e74c3c",2:"#3498db",3:"#2ecc71",4:"f1c40f"},PlayerPosition={1:0,2:0,3:0,4:0},ladders=[{start:5,finish:14},{start:9,finish:31},{start:20,finish:38},{start:28,finish:84},{start:40,finish:59},{start:51,finish:67},{start:63,finish:81},{start:71,finish:91}],snakes=[{start:99,finish:78},{start:95,finish:75},{start:93,finish:73},{start:87,finish:24},{start:64,finish:60},{start:62,finish:19},{start:54,finish:34},{start:17,finish:7}],noOfSnakes=8,noOfLadders=8,blockedPlaces=[0,1,100],totalPlayers=4,currentPlayer=1,currentDiceValue=0,ongoingMove=!1,diceRollQueue=[],extraLadderRoll=0,gameEnded=!1,soundMute=!0;if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function($){"use strict";var e=$.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1===e[0]&&9===e[1]&&e[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function($){$("#id-snl-mute i").css("color","red"),$("#id-snl-mute").click(function(){soundMute=!soundMute,soundMute?($("#id-snl-mute i").removeClass("fa-bell"),$("#id-snl-mute i").addClass("fa-bell-slash"),$("#id-snl-mute i").css("color","#e74c3c")):($("#id-snl-mute i").removeClass("fa-bell-slash"),$("#id-snl-mute i").addClass("fa-bell"),$("#id-snl-mute i").css("color","#2ecc71"))})}(jQuery),+function($){"use strict";for(var e=$("#id-snl-board"),t=99;t>=0;--t){var a=t+1;Math.floor(t/10)%2===0&&(a=10*(Math.floor(t/10)+1)-t%10);var i="id-snl-cell-"+a,r='<p class="snl-cell-player player1" data-placement="left" data-toggle="tooltip" data-original-title="Player 1"><i class="fa fa-lg fa-circle"> </i></p>';r+='<p class="snl-cell-player player2" data-placement="left" data-toggle="tooltip" data-original-title="Player 2"><i class="fa fa-lg fa-circle"> </i></p>',r+='<p class="snl-cell-player player3" data-placement="left" data-toggle="tooltip" data-original-title="Player 3"><i class="fa fa-lg fa-circle"> </i></p>',r+='<p class="snl-cell-player player4" data-placement="left" data-toggle="tooltip" data-original-title="Player 4"><i class="fa fa-lg fa-circle"> </i></p>';var n="<div id='"+i+"' class='snl-cell left' title='' data-placement='left' data-toggle='tooltip' data-original-title='"+a+"'>"+r+"</div>";e.append(n)}for(var l=0;10>=l;l+=2)$("#id-snl-cell-"+10*l).attr("data-placement","right"),$("#id-snl-cell-"+(10*l+1)).attr("data-placement","right");$(".snl-cell-player").tooltip()}(jQuery),+function($){"use strict";newBoardLayout()}(jQuery),+function($){"use strict";for(var e="#id-snl-checkers-svg",t=99;t>=0;--t){var a=t+1;Math.floor(t/10)%2===0&&(a=10*(Math.floor(t/10)+1)-t%10);var i=resolveCoOrdinates(a),r=["green","white"];addToSVG("rect",{x:i.X-10,y:i.Y-10,rx:0,ry:0,width:20,height:20,fill:"green",stroke:"#ffffff","stroke-width":.25,"stroke-opacity":.5},e),addToSVG("circle",{cx:i.X-5,cy:i.Y+5,r:4,fill:"white",stroke:"white",opacity:.1},e),addTextToSVG("text",{x:i.X-5,y:i.Y+5,fill:"white","font-family":"Helvetica Neue, sans-serif","font-size":4,"text-anchor":"middle","alignment-baseline":"middle"},e,a)}addTextToSVG("text",{x:10,y:188,fill:"white","font-family":"Helvetica Neue, sans-serif","font-size":4,"text-anchor":"middle","alignment-baseline":"middle"},e,"Start"),addTextToSVG("text",{x:10,y:8,fill:"white","font-family":"Helvetica Neue, sans-serif","font-size":4,"text-anchor":"middle","alignment-baseline":"middle"},e,"Finish")}(jQuery),+function($){"use strict";drawLadders(),drawSnakes()}(jQuery),+function($){"use strict";$("#id-snl-dice-big").delay(1e3).fadeOut(),$("#id-snl-dice").bind("click",function(){if(!gameEnded){currentDiceValue=Math.floor(6*Math.random())+1,playSound(6===currentDiceValue?"dicerollsix.mp3":"diceroll.mp3");var e="./static/img/assets/diceface-"+currentDiceValue+".svg";$("#id-snl-dice-big").attr("src",e),$("#id-snl-dice-big").fadeIn("slow"),$("#id-snl-dice-big").delay(500).fadeOut("slow"),$("#id-snl-diceface > img").fadeOut("fast",function(){$("#id-snl-diceface > img").attr("src",e)}),$("#id-snl-diceface > img").delay(500).fadeIn("fast")}})}(jQuery),+function($){$(document).on("click","#id-snl-modal-btn-game",function(e){resetGameplay(0)})}(jQuery),+function($){$(document).on("click","#id-snl-modal-btn-board",function(e){resetGameplay(0),newBoardLayout(),drawLadders(),drawSnakes()})}(jQuery),+function($){$(document).on("change","#id-snl-report-kind",function(e){$("#id-snl-modal-btn-report").text($("#id-snl-report-kind").val())})}(jQuery),+function($){$(document).on("click","#id-snl-modal-btn-report",function(e){e.preventDefault();var t=$("#id-snl-report-email").val(),a=$("#id-snl-report-title").val(),i=$("#id-snl-report-details").val(),r=$("#id-snl-report-kind option:selected").text().trim();$("#id-snl-report-form").get(0).reset(),$("#id-snl-modal-btn-report").text("Request Enhancement"),$.post("/report",{email:t,title:a,details:i,kind:r},function(e){console.log(e.result),$.notify.defaults({showAnimation:"fadeIn",hideAnimation:"slideUp",autoHideDelay:1500}),setTimeout(function(){$.notify("Thank you. We're working on it!","success")},1e3)})})}(jQuery),+function($){$("#id-snl-player-1").click(function(){var e=PlayerPosition[1],t=e>90?"bottom right":"top right";$.notify.defaults({globalPosition:"top right",elementPosition:t,showAnimation:"fadeIn",hideAnimation:"fadeOut",autoHideDelay:1500}),$("#id-snl-cell-"+PlayerPosition[1]).notify(Player[1]+" is at "+PlayerPosition[1],"error")})}(jQuery),+function($){$("#id-snl-player-2").click(function(){var e=PlayerPosition[2],t=e>90?"bottom right":"top right";$.notify.defaults({globalPosition:"top right",elementPosition:t,showAnimation:"fadeIn",hideAnimation:"fadeOut",autoHideDelay:1500}),$("#id-snl-cell-"+PlayerPosition[2]).notify(Player[2]+" is at "+PlayerPosition[2],"info")})}(jQuery),+function($){$("#id-snl-player-3").click(function(){var e=PlayerPosition[3],t=e>90?"bottom right":"top right";$.notify.defaults({globalPosition:"top right",elementPosition:t,showAnimation:"fadeIn",hideAnimation:"fadeOut",autoHideDelay:1500}),$("#id-snl-cell-"+PlayerPosition[3]).notify(Player[3]+" is at "+PlayerPosition[3],"success")})}(jQuery),+function($){$("#id-snl-player-4").click(function(){var e=PlayerPosition[4],t=e>90?"bottom right":"top right";$.notify.defaults({globalPosition:"top right",elementPosition:t,showAnimation:"fadeIn",hideAnimation:"fadeOut",autoHideDelay:1500}),$("#id-snl-cell-"+PlayerPosition[4]).notify(Player[4]+" is at "+PlayerPosition[4],"warn")})}(jQuery),+function($){$("#id-snl-new-game").bind("click",function(){resetGameplay(0)}),$("#id-snl-change-board").bind("click",function(){newBoardLayout(),drawLadders(),drawSnakes()}),$("#id-snl-current-score").bind("click",function(){$("#id-snl-win-modalLabel > i").text(" Currect Score");for(var e=1;totalPlayers>=e;++e)$("#id-snl-result-p"+e+" i").text(" "+Player[e]+": "+PlayerPosition[e])})}(jQuery),+function($){$(document).on("keyup","#id-snl-players-names-p1",function(e){$("#id-snl-players-names-p1").parent().parent().removeClass("has-success"),$("#id-snl-players-names-p1").parent().parent().addClass("has-error")})}(jQuery),+function($){$(document).on("keyup","#id-snl-players-names-p2",function(e){$("#id-snl-players-names-p2").parent().parent().removeClass("has-success"),$("#id-snl-players-names-p2").parent().parent().addClass("has-error")})}(jQuery),+function($){$(document).on("keyup","#id-snl-players-names-p3",function(e){$("#id-snl-players-names-p3").parent().parent().removeClass("has-success"),$("#id-snl-players-names-p3").parent().parent().addClass("has-error")})}(jQuery),+function($){$(document).on("keyup","#id-snl-players-names-p4",function(e){$("#id-snl-players-names-p4").parent().parent().removeClass("has-success"),$("#id-snl-players-names-p4").parent().parent().addClass("has-error")})}(jQuery),+function($){"use strict";$("#id-snl-dice").bind("click",function(){if(!gameEnded&&(postDiceRoll(),!ongoingMove)){for(var e=1;totalPlayers>=e;++e)$("#id-snl-player-"+e).removeClass("active");setTimeout(function(){$("#id-snl-player-"+currentPlayer).addClass("active")},1500),highlightNextCell()}gameEnded&&setTimeout(function(){showWinModal()},1e3)})}(jQuery);