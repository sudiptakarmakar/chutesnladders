function addToSVG(e,a,t){el=$(document.createElementNS("http://www.w3.org/2000/svg",e)),el.attr(a).appendTo(t)}function addTextToSVG(e,a,t,i){el=$(document.createElementNS("http://www.w3.org/2000/svg",e)),el.text(i),el.attr(a).appendTo(t)}function resolveCoOrdinates(e){"use strict";var a=e-1,t=10-Math.floor(a/10),i=a%10+1;t%2!==0&&(i=11-i);var r=20*i-10,n=20*t-10;return{X:r,Y:n}}function createLadder(){for(var e=81,a=0;-1!==$.inArray(a,blockedPlaces);)a=Math.floor(Math.random()*e);for(var t=0;-1!==$.inArray(t,blockedPlaces);){var i=Math.floor((a-1)/10),r=i+1,n=10*r+1;t=n+Math.floor(Math.random()*(100-n))}return blockedPlaces.push(a),blockedPlaces.push(t),{S:a,F:t}}function createSnake(){for(var e=11,a=0;-1!==$.inArray(a,blockedPlaces);)a=e+Math.floor(Math.random()*(100-e));for(var t=0,i=0;-1!==$.inArray(i,blockedPlaces)&&!(t>200);){t++;var r=Math.floor((a-1)/10),n=r,l=10*n;i=Math.floor(Math.random()*l)}return blockedPlaces.push(a),blockedPlaces.push(i),{S:a,F:i}}function newBoardLayout(){"use strict";ladders=[],snakes=[],blockedPlaces=[0,1,100];var e=8,a=8;$("#id-snl-ladders-svg").empty(),$("#id-snl-snakes-svg").empty();for(var t=0;e>t;++t){var i=createLadder();ladders.push({start:i.S,finish:i.F})}for(t=0;a>t;++t){var r=createSnake();snakes.push({start:r.S,finish:r.F})}}function drawLadders(){"use strict";var e="#id-snl-ladders-svg";for(var a in ladders){var t=resolveCoOrdinates(ladders[a].start),i=resolveCoOrdinates(ladders[a].finish);t.X===i.X&&(i.X=i.X-2,t.X=t.X+2);var r=Math.atan((t.Y-i.Y)/(t.X-i.X)),n=4,l=(t.X+n*Math.sin(r)).toFixed(1),s=(t.Y-n*Math.cos(r)).toFixed(1),o=(t.X-n*Math.sin(r)).toFixed(1),d=(t.Y+n*Math.cos(r)).toFixed(1),c=(i.X+n*Math.sin(r)).toFixed(1),u=(i.Y-n*Math.cos(r)).toFixed(1),f=(i.X-n*Math.sin(r)).toFixed(1),y=(i.Y+n*Math.cos(r)).toFixed(1);addToSVG("line",{x1:i.X,y1:i.Y,x2:t.X,y2:t.Y,stroke:"white","stroke-width":2*n,"stroke-opacity":1,"stroke-dasharray":"0.25, 3.75"},e),addToSVG("line",{x1:l,y1:s,x2:c,y2:u,stroke:"#dddddd","stroke-width":.5,"stroke-opacity":1},e),addToSVG("line",{x1:o,y1:d,x2:f,y2:y,stroke:"#dddddd","stroke-width":.5,"stroke-opacity":1},e);var p=0>r?-1:1,m=0>r?r*(180/Math.PI)+90:r*(180/Math.PI)-90,h=(t.X+p*(n/2)*Math.cos(r)).toFixed(1),P=(t.Y+p*(n/2)*Math.sin(r)).toFixed(1);addToSVG("circle",{cx:h,cy:P,r:n/2,fill:"white"},e),addTextToSVG("text",{x:h,y:P,fill:"green","font-family":"Helvetica Neue, sans-serif","font-size":n/2,"text-anchor":"middle","alignment-baseline":"middle",transform:"rotate("+m+" "+h+","+P+")"},e,ladders[a].finish)}}function drawSnakes(){"use strict";var e="#id-snl-snakes-svg";for(var a in snakes){var t=resolveCoOrdinates(snakes[a].start),i=resolveCoOrdinates(snakes[a].finish);t.X===i.X&&(i.X=i.X-2);var r=Math.atan((t.Y-i.Y)/(t.X-i.X)),n=6,l=(t.X+n*Math.sin(r)).toFixed(1),s=(t.Y-n*Math.cos(r)).toFixed(1),o=(t.X-n*Math.sin(r)).toFixed(1),d=(t.Y+n*Math.cos(r)).toFixed(1),c="M"+i.X+","+i.Y+" L"+l+","+s+" "+o+","+d+" Z L"+t.X+","+t.Y;addToSVG("path",{d:c,fill:"transparent",stroke:"gold","stroke-width":.25},e);var u=0>r?1:0;c="M"+l+","+s+" A"+n+","+n+" 0 0,"+u+" "+o+","+d+" Z",addToSVG("path",{d:c,fill:"#e74c3c",stroke:"gold","stroke-width":.25},e);var f=0>r?1:-1,y=0>r?r*(180/Math.PI)+90:r*(180/Math.PI)-90,p=(t.X+f*(n/3)*Math.cos(r)).toFixed(1),m=(t.Y+f*(n/3)*Math.sin(r)).toFixed(1);addToSVG("circle",{cx:p,cy:m,r:n/3,fill:"white"},e),addTextToSVG("text",{x:p,y:m,fill:"#e74c3c","font-family":"Helvetica Neue, sans-serif","font-size":n/3,"text-anchor":"middle","alignment-baseline":"middle",transform:"rotate("+y+" "+p+","+m+")"},e,snakes[a].finish),addToSVG("circle",{cx:i.X,cy:i.Y,r:1.5,stroke:"gold","stroke-width":.25,fill:"#e74c3c"},e)}}function playSound(e){if(!soundMute){var a=document.createElement("audio");a.setAttribute("src","./static/sound/"+e),a.setAttribute("autoplay","autoplay"),a.addEventListener("load",function(){a.play()},!0)}}function highlightNextCell(){for(var e=1;100>=e;++e)$("#id-snl-cell-"+e).css("background-image","none");setTimeout(function(){$("#id-snl-cell-"+PlayerPosition[currentPlayer]).css("background","url(static/images/cnlassets/activecell.svg) no-repeat center center"),$("#id-snl-cell-"+PlayerPosition[currentPlayer]).css("background-size","100%")},2e3)}function animateMove(e){var a="id-snl-cell-"+e,t="id-snl-cell-"+PlayerPosition[currentPlayer];0===e?$("#"+t+"> .player"+currentPlayer).delay(1500).fadeIn("slow"):($("#"+a+"> .player"+currentPlayer).delay(500).fadeOut("slow"),$("#"+t+"> .player"+currentPlayer).delay(1500).fadeIn("slow")),$("#"+t+"> .player"+currentPlayer).attr("data-original-title",Player[currentPlayer]+": "+PlayerPosition[currentPlayer])}function makeMoves(){for(var e in diceRollQueue){var a=PlayerPosition[currentPlayer];PlayerPosition[currentPlayer]=PlayerPosition[currentPlayer]+diceRollQueue[e],PlayerPosition[currentPlayer]>100?PlayerPosition[currentPlayer]=200-PlayerPosition[currentPlayer]:100===PlayerPosition[currentPlayer]&&(gameEnded=!0,extraLadderRoll=0),animateMove(a);for(var t in ladders)if(ladders[t].start===PlayerPosition[currentPlayer]){PlayerPosition[currentPlayer]=ladders[t].finish,setTimeout(playSound("ladder.mp3"),1500),animateMove(ladders[t].start),++extraLadderRoll;break}for(var i in snakes)if(snakes[i].start===PlayerPosition[currentPlayer]){PlayerPosition[currentPlayer]=snakes[i].finish,setTimeout(playSound("snake.mp3"),1500),animateMove(snakes[i].start);break}if($("#id-snl-player-"+currentPlayer+" a span i").text(" "+PlayerPosition[currentPlayer]),gameEnded)break}}function postDiceRoll(){if(0===PlayerPosition[currentPlayer]&&$("#id-snl-player-"+currentPlayer+" a i").addClass("player"+currentPlayer).removeClass("fa-user").addClass("fa-user-times"),diceRollQueue.push(currentDiceValue),6===currentDiceValue){ongoingMove=!0;var e=diceRollQueue.length;if(e>=3){var a=diceRollQueue[e-1]+diceRollQueue[e-2]+diceRollQueue[e-3];18===a&&(diceRollQueue=[])}}else makeMoves(),diceRollQueue=[],ongoingMove=!1,0>=extraLadderRoll&&!gameEnded?currentPlayer=currentPlayer%totalPlayers+1:--extraLadderRoll}function resetGameplay(e){gameEnded=!1,currentPlayer=1,currentDiceValue=0,ongoingMove=!1,diceRollQueue=[],extraLadderRoll=0,setTimeout(function(){for(var a in PlayerPosition){var t="id-snl-cell-"+PlayerPosition[a];$("#"+t+"> .player"+a).delay(500*e).fadeOut("slow"),$("#"+t).css("background-image","none"),PlayerPosition[a]=0}$("#id-snl-win-modalLabel > i").removeClass("fa-trophy").addClass("fa-users");for(var i=1;totalPlayers>=i;++i)$("#id-snl-player-"+i).removeClass("active"),$("#id-snl-player-"+i+" a span i").text(""),$("#id-snl-player-"+i+" a i").removeClass("player"+i).removeClass("fa-user-times").addClass("fa-user"),$("#id-snl-result-p"+i+" i").css("color","black"),$("#id-snl-result-p"+i+" i").css("text-shadow","none"),$("#id-snl-result-p"+i+" i").removeClass("fa-trophy");$("#id-snl-player-1").addClass("active")},2500*e)}function showWinModal(){playSound("win.mp3"),$("#id-snl-win-modalLabel > i").text(" Winner: "+Player[currentPlayer]),$("#id-snl-win-modalLabel > i").removeClass("fa-users").addClass("fa-trophy");for(var e=1;totalPlayers>=e;++e)$("#id-snl-result-p"+e+" i").text(" "+Player[e]+": "+PlayerPosition[e]);$("#id-snl-result-p"+currentPlayer+" i").css("color","gold"),$("#id-snl-result-p"+currentPlayer+" i").css("text-shadow","0 0 1px orange"),$("#id-snl-result-p"+currentPlayer+" i").addClass("fa-trophy"),$("#id-snl-win-modal").modal("show",{keyboard:!1})}function nameEditSetup(e){var a=e.parent(),t=a.parent(),i=a.next(),r=e.val().trim();t.addClass("has-success"),0===r.length?(t.removeClass("has-success").addClass("has-error"),i.removeClass("glyphicon-ok").addClass("glyphicon-warning-sign")):(t.removeClass("has-error").addClass("has-success"),i.removeClass("glyphicon-warning-sign").addClass("glyphicon-ok"))}function nameFocusoutSetup(e,a){var t=e.parent(),i=t.parent(),r=t.next(),n=e.val().trim();0===n.length?n=Player[a]:Player[a]=n,e.attr("placeholder",n),e.val(n),i.removeClass("has-error").removeClass("has-success"),r.removeClass("glyphicon-warning-sign").removeClass("glyphicon-ok")}var debug=!0,Player={1:"Player 1",2:"Player 2",3:"Player 3",4:"Player 4"},PlayerCol={1:"#e74c3c",2:"#3498db",3:"#2ecc71",4:"f1c40f"},PlayerPosition={1:0,2:0,3:0,4:0},ladders=[{start:5,finish:14},{start:9,finish:31},{start:20,finish:38},{start:28,finish:84},{start:40,finish:59},{start:51,finish:67},{start:63,finish:81},{start:71,finish:91}],snakes=[{start:99,finish:78},{start:95,finish:75},{start:93,finish:73},{start:87,finish:24},{start:64,finish:60},{start:62,finish:19},{start:54,finish:34},{start:17,finish:7}],noOfSnakes=8,noOfLadders=8,blockedPlaces=[0,1,100],totalPlayers=4,currentPlayer=1,currentDiceValue=0,ongoingMove=!1,diceRollQueue=[],extraLadderRoll=0,gameEnded=!1,soundMute=!0;if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){"use strict";var a=e.fn.jquery.split(" ")[0].split(".");if(a[0]<2&&a[1]<9||1===a[0]&&9===a[1]&&a[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(e){return document.createElement("svg").getAttributeNS?void 0:(e("body").empty(),void e("body").html("<center><h1>Your browser does not support SVG!</h1></center>"))}(jQuery),+function(e){e("#id-snl-mute i").css("color","#e74c3c"),e("#id-snl-mute i").css("transform","scale(1.6)"),e("#id-snl-mute").click(function(){soundMute=!soundMute,soundMute?(e("#id-snl-mute i").removeClass("fa-volume-up"),e("#id-snl-mute i").addClass("fa-volume-off"),e("#id-snl-mute i").css("color","#e74c3c")):(e("#id-snl-mute i").removeClass("fa-volume-off"),e("#id-snl-mute i").addClass("fa-volume-up"),e("#id-snl-mute i").css("color","#2ecc71"))})}(jQuery),+function(e){"use strict";for(var a=e("#id-snl-board"),t=99;t>=0;--t){var i=t+1;Math.floor(t/10)%2===0&&(i=10*(Math.floor(t/10)+1)-t%10);var r="id-snl-cell-"+i,n='<p class="snl-cell-player player1" data-placement="left" data-toggle="tooltip" data-original-title="Player 1"><i class="fa fa-lg fa-circle"> </i></p>';n+='<p class="snl-cell-player player2" data-placement="left" data-toggle="tooltip" data-original-title="Player 2"><i class="fa fa-lg fa-circle"> </i></p>',n+='<p class="snl-cell-player player3" data-placement="left" data-toggle="tooltip" data-original-title="Player 3"><i class="fa fa-lg fa-circle"> </i></p>',n+='<p class="snl-cell-player player4" data-placement="left" data-toggle="tooltip" data-original-title="Player 4"><i class="fa fa-lg fa-circle"> </i></p>';var l="<div id='"+r+"' class='snl-cell left' title='' data-placement='left' data-toggle='tooltip' data-original-title='"+i+"'>"+n+"</div>";a.append(l)}for(var s=0;10>=s;s+=2)e("#id-snl-cell-"+10*s).attr("data-placement","right"),e("#id-snl-cell-"+(10*s+1)).attr("data-placement","right")}(jQuery),+function(){"use strict";newBoardLayout()}(jQuery),+function(){"use strict";for(var e="#id-snl-checkers-svg",a=99;a>=0;--a){var t=a+1;Math.floor(a/10)%2===0&&(t=10*(Math.floor(a/10)+1)-a%10);var i=resolveCoOrdinates(t);addToSVG("rect",{x:i.X-10,y:i.Y-10,rx:0,ry:0,width:20,height:20,fill:"green",stroke:"#ffffff","stroke-width":.25,"stroke-opacity":.5},e),addToSVG("circle",{cx:i.X-5,cy:i.Y+5,r:4,fill:"white",stroke:"white",opacity:.1},e),addTextToSVG("text",{x:i.X-5,y:i.Y+5,fill:"white","font-family":"Helvetica Neue, sans-serif","font-size":4,"text-anchor":"middle","alignment-baseline":"middle"},e,t)}addTextToSVG("text",{x:10,y:188,fill:"white","font-family":"Helvetica Neue, sans-serif","font-size":4,"text-anchor":"middle","alignment-baseline":"middle"},e,"Start"),addTextToSVG("text",{x:10,y:8,fill:"white","font-family":"Helvetica Neue, sans-serif","font-size":4,"text-anchor":"middle","alignment-baseline":"middle"},e,"Finish")}(jQuery),+function(){"use strict";drawLadders(),drawSnakes()}(jQuery),+function(e){"use strict";e("#id-snl-dice-big").delay(1e3).fadeOut(),e("#id-snl-dice").bind("click",function(){if(!gameEnded){currentDiceValue=Math.floor(6*Math.random())+1,playSound(6===currentDiceValue?"dicerollsix.mp3":"diceroll.mp3");var a="./static/images/cnlassets/diceface-"+currentDiceValue+".svg";e("#id-snl-dice-big").attr("src",a),e("#id-snl-dice-big").fadeIn("slow"),e("#id-snl-dice-big").delay(500).fadeOut("slow"),e("#id-snl-diceface > img").fadeOut("fast",function(){e("#id-snl-diceface > img").attr("src",a)}),e("#id-snl-diceface > img").delay(500).fadeIn("fast"),debug&&(currentDiceValue=50)}})}(jQuery),+function(e){e(document).on("click","#id-snl-modal-btn-game",function(){resetGameplay(0)})}(jQuery),+function(e){e(document).on("click","#id-snl-modal-btn-board",function(){resetGameplay(0),newBoardLayout(),drawLadders(),drawSnakes()})}(jQuery),+function(e){e(document).on("change","#id-snl-report-kind",function(){e("#id-snl-modal-btn-report").text(e("#id-snl-report-kind").val())})}(jQuery),+function(e){e(document).on("click","#id-snl-modal-btn-report",function(a){a.preventDefault();var t=e("#id-snl-report-email").val(),i=e("#id-snl-report-title").val(),r=e("#id-snl-report-details").val(),n=e("#id-snl-report-kind option:selected").text().trim();e("#id-snl-report-form").get(0).reset(),e("#id-snl-modal-btn-report").text("Request Enhancement"),e.post("/report",{email:t,title:i,details:r,kind:n,reportingEnabled:!1},function(){e.notify.defaults({showAnimation:"fadeIn",hideAnimation:"slideUp",autoHideDelay:1500}),setTimeout(function(){e.notify("Thank you. We're working on it!","success")},1e3)})})}(jQuery),+function(e){e("#id-snl-player-1").click(function(){var a=PlayerPosition[1],t=a>90?"bottom right":"top right";e.notify.defaults({globalPosition:"top right",elementPosition:t,showAnimation:"fadeIn",hideAnimation:"fadeOut",showDuration:100,autoHideDelay:1500}),e("#id-snl-cell-"+PlayerPosition[1]).notify(Player[1]+" is at "+PlayerPosition[1],"error")})}(jQuery),+function(e){e("#id-snl-player-2").click(function(){var a=PlayerPosition[2],t=a>90?"bottom right":"top right";e.notify.defaults({globalPosition:"top right",elementPosition:t,showAnimation:"fadeIn",hideAnimation:"fadeOut",showDuration:100,autoHideDelay:1500}),e("#id-snl-cell-"+PlayerPosition[2]).notify(Player[2]+" is at "+PlayerPosition[2],"info")})}(jQuery),+function(e){e("#id-snl-player-3").click(function(){var a=PlayerPosition[3],t=a>90?"bottom right":"top right";e.notify.defaults({globalPosition:"top right",elementPosition:t,showAnimation:"fadeIn",hideAnimation:"fadeOut",showDuration:100,autoHideDelay:1500}),e("#id-snl-cell-"+PlayerPosition[3]).notify(Player[3]+" is at "+PlayerPosition[3],"success")})}(jQuery),+function(e){e("#id-snl-player-4").click(function(){var a=PlayerPosition[4],t=a>90?"bottom right":"top right";e.notify.defaults({globalPosition:"top right",elementPosition:t,showAnimation:"fadeIn",hideAnimation:"fadeOut",showDuration:100,autoHideDelay:1500}),e("#id-snl-cell-"+PlayerPosition[4]).notify(Player[4]+" is at "+PlayerPosition[4],"warn")})}(jQuery),+function(e){e("#id-snl-new-game").bind("click",function(){resetGameplay(0)}),e("#id-snl-change-board").bind("click",function(){newBoardLayout(),drawLadders(),drawSnakes()}),e("#id-snl-current-score").bind("click",function(){e("#id-snl-win-modalLabel > i").text(" Currect Score");for(var a=1;totalPlayers>=a;++a)e("#id-snl-result-p"+a+" i").text(" "+Player[a]+": "+PlayerPosition[a])})}(jQuery),+function(e){e(document).on("keyup","#id-snl-players-names-p1",function(){var a=e("#id-snl-players-names-p1");nameEditSetup(a,1)}),e(document).on("focusout","#id-snl-players-names-p1",function(){var a=e("#id-snl-players-names-p1");nameFocusoutSetup(a,1)})}(jQuery),+function(e){e(document).on("keyup","#id-snl-players-names-p2",function(){var a=e("#id-snl-players-names-p2");nameEditSetup(a,2)}),e(document).on("focusout","#id-snl-players-names-p2",function(){var a=e("#id-snl-players-names-p2");nameFocusoutSetup(a,2)})}(jQuery),+function(e){e(document).on("keyup","#id-snl-players-names-p3",function(){var a=e("#id-snl-players-names-p3");nameEditSetup(a,3)}),e(document).on("focusout","#id-snl-players-names-p3",function(){var a=e("#id-snl-players-names-p3");nameFocusoutSetup(a,3)})}(jQuery),+function(e){e(document).on("keyup","#id-snl-players-names-p4",function(){var a=e("#id-snl-players-names-p4");nameEditSetup(a,4)}),e(document).on("focusout","#id-snl-players-names-p4",function(){var a=e("#id-snl-players-names-p4");nameFocusoutSetup(a,4)})}(jQuery),+function(e){"use strict";e("#id-snl-dice").bind("click",function(){if(!gameEnded&&(postDiceRoll(),!ongoingMove)){for(var a=1;totalPlayers>=a;++a)e("#id-snl-player-"+a).removeClass("active");setTimeout(function(){e("#id-snl-player-"+currentPlayer).addClass("active")},1500),highlightNextCell()}gameEnded&&setTimeout(function(){showWinModal()},1e3)})}(jQuery);